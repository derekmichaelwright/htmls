---
title: "Global Food Security"
subtitle: "Graphs of of crop production per capita using FAO data"
summary:  "Graphs of of crop production per capita using FAO data"
author: "Derek Michael Wright <wrightmderek@gmail.com> [www.dblogr.com/](https://dblogr.netlify.com/)"
date: "2020-03-01"
categories: [ "agData" ]
tags: [ "agData", "Regions", "Featured" ]
image:
  preview_only: true
links:
  - icon_pack: fas
    icon: chart-line
    name: All Graphs
    url: agdata_graphs/global_food_security
  - icon_pack: far
    icon: file-code
    name: HTML
    url: https://derekmichaelwright.github.io/htmls/agdata/global_food_security.html
  - icon_pack: far
    icon: file-pdf
    name: PDF (Save/Print)
    url: agdata_pdfs/global_food_security.pdf
---



<hr />
<pre class="r"><code># devtools::install_github(&quot;derekmichaelwright/agData&quot;)
library(agData) # Loads: tidyverse, ggpubr, ggbeeswarm, ggrepel</code></pre>
<div id="prep-data" class="section level1">
<h1>Prep data</h1>
<pre class="r"><code># Prep Data
areas &lt;- c(&quot;World&quot;, agData_FAO_Country_Table %&gt;% pull(SubRegion) %&gt;% unique() %&gt;% as.character())
crops &lt;- c(&quot;Cereals, Total&quot;, &quot;Pulses, Total&quot;, &quot;Roots and Tubers, Total&quot;)
dd &lt;- agData_FAO_Crops2 %&gt;% select(-Unit) %&gt;%
  filter(Area %in% areas, Crop %in% crops) %&gt;%
  spread(Measurement, Value)
pp &lt;- agData_FAO_Population %&gt;%
  filter(Measurement == &quot;Total&quot;) %&gt;%
  select(Area, Year, Population=Value)
dd &lt;- left_join(dd, pp, by = c(&quot;Area&quot;, &quot;Year&quot;)) %&gt;%
  left_join(agData_FAO_Region_Table, by = c(&quot;Area&quot;=&quot;SubRegion&quot;)) %&gt;%
  mutate(TonnesPerPerson = Production / Population,
         Crop = plyr::mapvalues(Crop, crops, c(&quot;Cereals&quot;, &quot;Pulses&quot;, &quot;Tubers&quot;)),
         Area = plyr::mapvalues(Area, &quot;Australia and New Zealand&quot;, &quot;Au and NZ&quot;))
for(i in 1:nrow(dd)) {
  p1961 &lt;- dd %&gt;% filter(Area == dd$Area[i], Crop == dd$Crop[i], Year == 1961) %&gt;% 
    pull(Population)
  dd$Population_R1961[i] &lt;- ifelse(length(p1961)&gt;0, 100*(dd$Population[i] - p1961) / p1961, NA)
  p1961 &lt;- dd %&gt;% filter(Area == dd$Area[i], Crop == dd$Crop[i], Year == 1961) %&gt;% 
    pull(Production)
  dd$Production_R1961[i] &lt;- ifelse(length(p1961), 100*(dd$Production[i] - p1961) / p1961, NA)
  p1961 &lt;- dd %&gt;% filter(Area == dd$Area[i], Crop == dd$Crop[i], Year == 1961) %&gt;% 
    pull(Yield)
  dd$Yield_R1961[i] &lt;- ifelse(length(p1961), 100*(dd$Yield[i] - p1961) / p1961, NA)
  p1961 &lt;- dd %&gt;% filter(Area == dd$Area[i], Crop == dd$Crop[i], Year == 1961) %&gt;% 
    pull(`Area harvested`)
  dd$Area_R1961[i] &lt;- ifelse(length(p1961), 100*(dd$`Area harvested`[i] - p1961) / p1961, NA)
}</code></pre>
</div>
<div id="relative-to-population" class="section level1">
<h1>Relative to Population</h1>
<pre class="r"><code># Prep data
xx &lt;- dd %&gt;% filter(Area == &quot;World&quot;)
# Plot
mp &lt;- ggplot(xx, aes(x = Year)) +
  geom_line(aes(y = Population_R1961, color = &quot;Population&quot;)) +
  geom_line(aes(y = Production_R1961, color = Crop)) +
  scale_color_manual(name = NULL, values = agData_Colors,
                     breaks = c(&quot;Population&quot;,&quot;Cereals&quot;, &quot;Pulses&quot;, &quot;Tubers&quot;)) +
  theme_agData() +
  labs(title = &quot;Production Relative to 1961&quot;, y = &quot;%&quot;, x = NULL)
ggsave(&quot;global_food_security_01.png&quot;, mp, width = 6, height = 4)</code></pre>
<p><img src="global_food_security_01.png" /></p>
<div style="page-break-after: always;"></div>
<pre class="r"><code># Prep data
xx &lt;- dd %&gt;% filter(Area == &quot;World&quot;)
# Plot
mp &lt;- ggplot(xx, aes(x = Year)) +
  geom_line(aes(y = Population_R1961, color = &quot;Population&quot;)) +
  geom_line(aes(y = Production_R1961, color = &quot;Production&quot;)) +
  geom_line(aes(y = Yield_R1961, color = &quot;Yield&quot;)) +
  geom_line(aes(y = Area_R1961, color = &quot;Area&quot;)) +
  facet_grid(.~Crop) +
  scale_x_continuous(breaks = seq(1965,2015, by = 25)) +
  scale_color_manual(name = NULL, values = agData_Colors,
                     breaks = c(&quot;Population&quot;,&quot;Production&quot;, &quot;Yield&quot;, &quot;Area&quot;)) +
  theme_agData(legend.position = &quot;bottom&quot;) +
  labs(title = &quot;Relative to 1961&quot;, y = &quot;%&quot;, x = NULL)
ggsave(&quot;global_food_security_02.png&quot;, mp, width = 6, height = 4)</code></pre>
<p><img src="global_food_security_02.png" />
</p>
<pre class="r"><code># Prep data
xx &lt;- dd %&gt;% filter(Crop == &quot;Cereals&quot;, Area == &quot;World&quot;)
# Plot
mp &lt;- ggplot(xx, aes(x = Year)) +
  geom_line(aes(y = Population_R1961, color = &quot;Population&quot;)) +
  geom_line(aes(y = Production_R1961, color = &quot;Production&quot;)) +
  geom_line(aes(y = Yield_R1961, color = &quot;Yield&quot;)) +
  geom_line(aes(y = Area_R1961, color = &quot;Area&quot;)) +
  scale_x_continuous(breaks = seq(1965,2015, by = 25)) +
  scale_color_manual(name = NULL, values = agData_Colors,
                     breaks = c(&quot;Population&quot;,&quot;Production&quot;, &quot;Yield&quot;, &quot;Area&quot;)) +
  theme_agData(legend.position = &quot;bottom&quot;) +
  labs(title = &quot;Relative to 1961 - Cereals&quot;, y = &quot;%&quot;, x = NULL)
ggsave(&quot;global_food_security_03.png&quot;, mp, width = 6, height = 4)</code></pre>
<div style="page-break-after: always;"></div>
<p><img src="global_food_security_03.png" /></p>
</div>
<div id="regions" class="section level1">
<h1>Regions</h1>
<pre class="r"><code># Prep data
xx &lt;- dd %&gt;% filter(Year == 2017, Area != &quot;World&quot;)
# Plot
mp &lt;- ggplot(xx, aes(x = Area, y = TonnesPerPerson, fill = Region)) + 
  geom_bar(stat = &quot;identity&quot;, color = &quot;black&quot;) +
  facet_grid(Crop ~ Region, scales = &quot;free&quot;, space = &quot;free_x&quot;) +
  scale_fill_manual(values = agData_Colors[c(1,4,3,2,7)]) +
  theme_agData(legend.position = &quot;none&quot;, rotx = T) +
  labs(title = &quot;Food Security - 2017&quot;, y = &quot;Tonnes Per Person&quot;, x = NULL,
       caption = &quot;\xa9 www.dblogr.com/  |  Data: FAOSTAT&quot;)
ggsave(&quot;global_food_security_04.png&quot;, mp, width = 6, height = 4)</code></pre>
<p><img src="global_food_security_04.png" /></p>
<div style="page-break-after: always;"></div>
<pre class="r"><code># Prep Data
xx &lt;- dd %&gt;% filter(Year == 2017, Area != &quot;World&quot;) %&gt;%
  select(Area, Region, Crop, TonnesPerPerson) %&gt;%
  spread(Crop, TonnesPerPerson)
# Plot
mp &lt;- ggplot(xx, aes(x = Cereals, y = Pulses)) + 
  geom_point(aes(size = Tubers, color = Region), alpha = 0.5) + 
  geom_text_repel(aes(label = Area), size = 3) +
  scale_color_manual(values = agData_Colors[c(1,4,3,2,7)]) +
  theme_agData(rotx = T) +
  labs(title = &quot;Food Security - 2017&quot;,
       caption = &quot;\xa9 www.dblogr.com/  |  Data: FAOSTAT&quot;)
ggsave(&quot;global_food_security_05.png&quot;, mp, width = 6, height = 4)</code></pre>
<p><img src="global_food_security_05.png" /></p>
<div style="page-break-after: always;"></div>
<pre class="r"><code># Prep data
xx &lt;- dd %&gt;% filter(Area != &quot;World&quot;)
# Plot
mp &lt;- ggplot(xx, aes(x = Year, y = TonnesPerPerson, color = Crop)) + 
  geom_line() +
  facet_wrap(. ~ Area, ncol = 6) +
  theme_agData(legend.position = &quot;bottom&quot;) +
  labs(caption = &quot;\xa9 www.dblogr.com/  |  Data: FAOSTAT&quot;)
ggsave(&quot;global_food_security_06.png&quot;, mp, width = 12, height = 8)</code></pre>
<p><img src="global_food_security_06.png" /></p>
</div>
<div id="crops" class="section level1">
<h1>Crops</h1>
<pre class="r"><code># Prep data
crops &lt;- c(&quot;Wheat&quot;, &quot;Maize&quot;, &quot;Rice&quot;, &quot;Soybeans&quot;, &quot;Sorghum&quot;, &quot;Beans, dry&quot;, &quot;Chick peas&quot;, &quot;Lentils&quot;)
xx &lt;- agData_FAO_Trade %&gt;%
  addRegionInfo() %&gt;%
  filter(Measurement %in% c(&quot;Import Quantity&quot;, &quot;Export Quantity&quot;),
         Crop %in% crops, Area %in% agData_FAO_Country_Table$Region) %&gt;%
  mutate(Area = factor(Area, levels = levels(.$Region)))
# Plot
mp &lt;- ggplot(xx, aes(x = Year, y = Value / 1000000, group = Area, color = Area)) + 
  geom_line() + 
  facet_grid(Crop ~ Measurement, scales = &quot;free_y&quot;) +
  scale_x_continuous(breaks       = seq(1960, 2015, by = 10),
                     minor_breaks = seq(1960, 2015, by = 5))  +
  scale_color_manual(values = agData_Colors[c(1,4,3,2,7)]) +
  theme_agData(legend.position = &quot;bottom&quot;) + 
  labs(title = &quot;Import/Export of Major Crops&quot;, y = &quot;Million Tonnes&quot;, x = NULL,
       caption = &quot;\xa9 www.dblogr.com/  |  Data: FAOSTAT&quot;)
ggsave(&quot;global_food_security_07.png&quot;, mp, width = 6, height = 8)</code></pre>
<p><img src="global_food_security_07.png" /></p>
<pre class="r"><code># Create plotting function
netImportExport &lt;- function(crop = &quot;Wheat&quot;, year = 2017) {
  # Prep data
  xx &lt;- agData_FAO_Trade %&gt;% addRegionInfo() %&gt;%
    filter(Measurement %in% c(&quot;Import Quantity&quot;, &quot;Export Quantity&quot;), 
           Area %in% unique(agData_FAO_Country_Table$Country),
           Crop == crop, Year == year) %&gt;%
    spread(Measurement, Value) %&gt;%
    mutate(Net = `Export Quantity` - `Import Quantity`) %&gt;%
    filter(!is.na(Net)) %&gt;% arrange(Net) %&gt;%
    mutate(Area = factor(Area, levels = rev(unique(.$Area))))
  x1 &lt;- top_n(xx, 10, Net) %&gt;% mutate(Label = &quot;Top 10&quot;)
  x2 &lt;- top_n(xx %&gt;% mutate(Net = -Net), 10, Net) %&gt;% mutate(Label = &quot;Bottom 10&quot;, Net = -Net)
  xx &lt;- bind_rows(x1, x2) %&gt;% mutate(Label = factor(Label, levels = c(&quot;Top 10&quot;, &quot;Bottom 10&quot;)))
  # Plot
  ggplot(xx, aes(x = Area, y = Net / 1000000, fill = Region)) + 
    geom_bar(stat = &quot;identity&quot;, color = &quot;black&quot;, alpha = 0.8) +
    facet_grid(. ~ Label, scales = &quot;free_x&quot;) +
    scale_fill_manual(values = agData_Colors[c(1,4,3,2,7)]) +
    theme_agData(rotx = T) + 
    labs(title = crop, subtitle = &quot;Export - Import&quot;, y = &quot;Million Tonnes&quot;, x = NULL,
         caption = &quot;\xa9 www.dblogr.com/  |  Data: FAOSTAT&quot;)
}</code></pre>
<pre class="r"><code>mp &lt;- netImportExport(crop = &quot;Wheat&quot;, year = 2017)
ggsave(&quot;global_food_security_08.png&quot;, mp, width = 6, height = 3.75)</code></pre>
<p><img src="global_food_security_08.png" /></p>
<div style="page-break-after: always;"></div>
<pre class="r"><code>mp &lt;- netImportExport(crop = &quot;Maize&quot;, year = 2017)
ggsave(&quot;global_food_security_09.png&quot;, mp, width = 6, height = 3.75)</code></pre>
<p><img src="global_food_security_09.png" /></p>
<pre class="r"><code>mp &lt;- netImportExport(crop = &quot;Rice&quot;, year = 2017)
ggsave(&quot;global_food_security_10.png&quot;, mp, width = 6, height = 3.75)</code></pre>
<p><img src="global_food_security_10.png" /></p>
<pre class="r"><code>mp &lt;- netImportExport(crop = &quot;Soybeans&quot;, year = 2017)
ggsave(&quot;global_food_security_11.png&quot;, mp, width = 6, height = 3.75)</code></pre>
<p><img src="global_food_security_11.png" /></p>
<pre class="r"><code>mp &lt;- netImportExport(crop = &quot;Sorghum&quot;, year = 2017)
ggsave(&quot;global_food_security_12.png&quot;, mp, width = 6, height = 3.75)</code></pre>
<p><img src="global_food_security_12.png" /></p>
<pre class="r"><code>mp &lt;- netImportExport(crop = &quot;Beans, dry&quot;, year = 2017)
ggsave(&quot;global_food_security_13.png&quot;, mp, width = 6, height = 3.75)</code></pre>
<p><img src="global_food_security_13.png" /></p>
<pre class="r"><code>mp &lt;- netImportExport(crop = &quot;Chick peas&quot;, year = 2017)
ggsave(&quot;global_food_security_14.png&quot;, mp, width = 6, height = 3.75)</code></pre>
<p><img src="global_food_security_14.png" /></p>
<pre class="r"><code>mp &lt;- netImportExport(crop = &quot;Lentils&quot;, year = 2017)
ggsave(&quot;global_food_security_15.png&quot;, mp, width = 6, height = 3.75)</code></pre>
<p><img src="global_food_security_15.png" /></p>
</div>
