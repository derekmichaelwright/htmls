---
title: "Lentil Production"
subtitle: "Graphs of lentil production using FAO data"
summary:  "Graphs of lentil production using FAO data"
author: "Derek Michael Wright <wrightmderek@gmail.com> [www.dblogr.com/](https://dblogr.netlify.com/)"
date: "2020-03-01"
categories: [ "agData" ]
tags: [ "agData", "Lentil" ]
image:
  preview_only: true
links: 
  - icon_pack: fas
    icon: chart-line
    name: All Graphs
    url: agdata_graphs/lentil
  - icon_pack: far
    icon: file-code
    name: HTML
    url: https://derekmichaelwright.github.io/htmls/agdata/lentil.html
  - icon_pack: far
    icon: file-pdf
    name: PDF (Save/Print)
    url: agdata_pdfs/lentil.pdf
  - icon_pack: far
    icon: file-pdf
    name: Lentil FAO
    url: lentil.pdf
---



<hr />
<pre class="r"><code># devtools::install_github(&quot;derekmichaelwright/agData&quot;)
library(agData) # Loads: tidyverse, ggpubr, ggbeeswarm, ggrepel</code></pre>
<div style="page-break-after: always;"></div>
<div id="production-by-country-2018" class="section level1">
<h1>Production by Country 2018</h1>
<pre class="r"><code># Prep data
xx &lt;- agData_FAO_Crops %&gt;% addRegionInfo() %&gt;%
  filter(Area %in% agData_FAO_Country_Table$Country,
         Year == 2018, Crop == &quot;Lentils&quot;, Measurement == &quot;Production&quot;) %&gt;%
  arrange(desc(Value)) %&gt;% 
  slice(1:10) %&gt;%
  mutate(Area = factor(Area, levels = Area) )
# Plot
mp &lt;- ggplot(xx, aes(x = Area, y = Value / 1000000, fill = Region)) + 
  geom_bar(stat = &quot;identity&quot;, color = &quot;black&quot;) +
  scale_fill_manual(values = agData_Colors) +
  theme_agData(rotx = T) +
  labs(title = &quot;Top Lentil Producers for 2018&quot;, y = &quot;Million Tonnes&quot;, x = NULL,
       caption = &quot;\xa9 www.dblogr.com/  |  Data: FAOSTAT&quot;)
ggsave(&quot;lentil_01.png&quot;, mp, width = 6, height = 4)</code></pre>
<p><img src="lentil_01.png" /></p>
<div style="page-break-after: always;"></div>
</div>
<div id="yields-by-country" class="section level1">
<h1>Yields by Country</h1>
<pre class="r"><code># Prep data
areas &lt;- c(&quot;Canada&quot;, &quot;USA&quot;, &quot;India&quot;, &quot;Ethiopia&quot;, &quot;Turkey&quot;)
xx &lt;- agData_FAO_Crops %&gt;%
  filter(Crop == &quot;Lentils&quot;, Area %in% areas, Measurement == &quot;Yield&quot;) %&gt;%
  addRegionInfo() %&gt;%
  mutate(Area = factor(Area, levels = areas))
# Plot
mp &lt;- ggplot(xx, aes(x = Year, y = Value, color = Area)) +
  geom_line(alpha = 0.2) +
  geom_smooth(method = &quot;loess&quot;, size = 1.5, se = F) +
  scale_x_continuous(breaks = seq(1960, 2015, by = 5), minor_breaks = NULL) +
  coord_cartesian(xlim = c(min(xx$Year)+1, max(xx$Year)-2)) +
  scale_color_manual(values = agData_Colors[c(3,4,2,1,5)]) +
  theme_agData(legend.position = &quot;bottom&quot;) +
  labs(title = &quot;Lentil Yields&quot;, y = &quot;Tonnes / Hectare&quot;, x = NULL,
       caption = &quot;\xa9 www.dblogr.com/  |  Data: FAOSTAT&quot;)
ggsave(&quot;lentil_02.png&quot;, mp, width = 6, height = 4)</code></pre>
<p><img src="lentil_02.png" /></p>
<div style="page-break-after: always;"></div>
</div>
<div id="production-by-country" class="section level1">
<h1>Production by Country</h1>
<pre class="r"><code># Prep data
areas &lt;- c(&quot;Canada&quot;, &quot;Southern Asia&quot;, &quot;USA&quot;, &quot;Turkey&quot;, &quot;Europe&quot;, &quot;Africa&quot;,  &quot;Oceania&quot;)
xx &lt;- agData_FAO_Crops %&gt;% 
  filter(Area %in% areas, Crop == &quot;Lentils&quot;, Measurement == &quot;Production&quot;) %&gt;%
  mutate(Area = factor(Area, levels = areas) )
# Plot
mp &lt;- ggplot(xx, aes(x = Year, y = Value / 1000000, color = Area)) + 
  geom_line(size = 1.5) + 
  scale_color_manual(values = agData_Colors) +
  scale_x_continuous(breaks = seq(1960, 2015, 5), minor_breaks = NULL) +
  coord_cartesian(xlim = c(min(xx$Year)+1, max(xx$Year)-2)) +
  theme_agData(legend.position = &quot;bottom&quot;, rotx = T) +
  labs(title = &quot;Lentil Production&quot;, y = &quot;Million Tonnes&quot;, x = NULL,
       caption = &quot;\xa9 www.dblogr.com/  |  Data: FAOSTAT&quot;)
ggsave(&quot;lentil_03.png&quot;, width = 6, height = 4)</code></pre>
<p><img src="lentil_03.png" /></p>
<div style="page-break-after: always;"></div>
</div>
<div id="canadas-global-contribution" class="section level1">
<h1>Canadaâ€™s Global Contribution</h1>
<pre class="r"><code># Prep data
xx &lt;- agData_FAO_Crops %&gt;% 
  filter(Crop == &quot;Lentils&quot;, Measurement == &quot;Production&quot;,
         Area %in% c(&quot;Canada&quot;, &quot;World&quot;) ) %&gt;%
  mutate(Area = factor(Area, levels = c(&quot;World&quot;, &quot;Canada&quot;)))
# Plot
mp &lt;- ggplot(xx, aes(x = Year, y = Value / 1000000, fill = Area, color = I(&quot;Black&quot;))) +
  geom_area(position = &quot;identity&quot;, alpha = 0.6) +
  theme(legend.position = &quot;bottom&quot;) +
  scale_fill_manual(values = alpha(c(&quot;darkgreen&quot;, &quot;darkred&quot;), 0.6)) +
  scale_x_continuous(breaks = seq(1960, 2015, 5), minor_breaks = NULL)  +
  coord_cartesian(xlim = c(min(xx$Year)+1, max(xx$Year)-3)) +
  theme_agData() +
  labs(title   = &quot;Canada&#39;s Contribution to Global Lentil Production&quot;, 
       y = &quot;Million Tonnes&quot;, x = NULL,
       caption = &quot;\xa9 www.dblogr.com/  |  Data: FAOSTAT&quot;)
ggsave(&quot;lentil_04.png&quot;, mp, width = 6, height = 4)</code></pre>
<p><img src="lentil_04.png" /></p>
<div style="page-break-after: always;"></div>
</div>
<div id="importexport-canada-vs-india" class="section level1">
<h1>Import/Export Canada vs India</h1>
<pre class="r"><code># Prep data
xx &lt;- agData_FAO_Trade %&gt;%
  filter(Measurement %in% c(&quot;Import Quantity&quot;, &quot;Export Quantity&quot;),
         Crop == &quot;Lentils&quot;, Area %in% c(&quot;Canada&quot;,&quot;India&quot;) )
# Plot
mp &lt;- ggplot(xx, aes(x = Year, y = Value / 1000000, group = Measurement, 
                     color = Measurement)) + 
  geom_line(size = 1.25) + 
  facet_grid(. ~ Area) +
  theme(legend.position = &quot;bottom&quot;) +
  scale_color_manual(values = c(&quot;darkorange&quot;, &quot;darkblue&quot;)) +
  scale_x_continuous(breaks       = seq(1960, 2015, by = 10),
                     minor_breaks = seq(1960, 2015, by = 5))  +
  theme_agData() +
  labs(title = &quot;Lentil Import/Export&quot;, y = &quot;Million Tonnes&quot;, x = NULL,
       caption = &quot;Data: \xa9 www.dblogr.com/  |  FAOSTAT&quot;)
ggsave(&quot;lentil_05.png&quot;, mp, width = 6, height = 4)</code></pre>
<p><img src="lentil_05.png" /></p>
<div style="page-break-after: always;"></div>
</div>
<div id="importexport-by-region" class="section level1">
<h1>Import/Export by Region</h1>
<pre class="r"><code># Prep data
xx &lt;- agData_FAO_Trade %&gt;%
  addRegionInfo() %&gt;%
  filter(Measurement %in% c(&quot;Import Quantity&quot;, &quot;Export Quantity&quot;),
         Crop == &quot;Lentils&quot;, Area %in% agData_FAO_Country_Table$Region)
# Plot
mp &lt;- ggplot(xx, aes(x = Year, y = Value / 1000000, group = Area, color = Area)) + 
  geom_line() + 
  facet_grid(. ~ Measurement) +
  scale_x_continuous(breaks       = seq(1960, 2015, by = 10),
                     minor_breaks = seq(1960, 2015, by = 5))  +
  scale_color_manual(values = agData_Colors) +
  theme_agData(legend.position = &quot;bottom&quot;) + 
  labs(title = &quot;Lentil Import/Export&quot;, y = &quot;Million Tonnes&quot;, x = NULL,
       caption = &quot;\xa9 www.dblogr.com/  |  Data: FAOSTAT&quot;)
ggsave(&quot;lentil_06.png&quot;, mp, width = 6, height = 4)</code></pre>
<p><img src="lentil_06.png" /></p>
<div style="page-break-after: always;"></div>
</div>
<div id="production-pie-charts" class="section level1">
<h1>Production Pie Charts</h1>
<pre class="r"><code># Plot function
ggPie &lt;- function(crop, measurement = &quot;Production&quot;, year = 2018, other = 0.01) {
  xx &lt;- agData_FAO_Crops %&gt;% 
    filter(Crop == crop, Year == year, Measurement == measurement,
           Area %in% agData_FAO_Country_Table$Country)
  total &lt;- agData_FAO_Crops %&gt;% 
    filter(Area == &quot;World&quot;, Year == year, Crop == crop, 
           Measurement == measurement) %&gt;%
    pull(Value) %&gt;% max()
  limit &lt;- total * other
  x1 &lt;- xx %&gt;% filter(Value &gt; limit)
  x2 &lt;- xx %&gt;% filter(Value &lt; limit) %&gt;% 
    group_by(Crop, Measurement, Unit, Year) %&gt;%
    summarise(Value = sum(Value)) %&gt;% ungroup() %&gt;%
    mutate(Area = &quot;Other&quot;)
  xx &lt;- bind_rows(x1, x2) %&gt;%
    arrange(Value) %&gt;%
    mutate(Percentage = round(100 * Value / total), 
           Area = paste0(Area, &quot; (&quot;, Percentage, &quot; %)&quot;),
           Area = factor(Area, levels = rev(unique(Area))))
  blank_theme &lt;- theme_minimal() +
    theme(
      axis.title   = element_blank(),
      axis.ticks   = element_blank(),
      axis.text    = element_blank(),
      panel.border = element_blank(),
      panel.grid   = element_blank(),
      plot.title   = element_text(size = 14, face = &quot;bold&quot;)
  )
  ggplot(xx, aes(x = Crop, y = Value, fill = Area)) +
    geom_bar(stat = &quot;identity&quot;) +
    coord_polar(&quot;y&quot;, start = 0) +
    blank_theme +
    scale_fill_manual(values = agData_Colors) +
    labs(title = paste(&quot;Lentil |&quot;, year),
         caption = &quot;\xa9 www.dblogr.com/  |  Data: FAOSTAT&quot;)
}</code></pre>
<div style="page-break-after: always;"></div>
<div id="section" class="section level2">
<h2>2017</h2>
<pre class="r"><code># Plot
mp &lt;- ggPie(crop = &quot;Lentils&quot;, measurement = &quot;Production&quot;, year = 2018, other = 0.02)
ggsave(&quot;lentil_07.png&quot;, mp, width = 6, height = 4)</code></pre>
<p><img src="lentil_07.png" /></p>
<div style="page-break-after: always;"></div>
</div>
<div id="section-1" class="section level2">
<h2>1961</h2>
<pre class="r"><code># Plot
mp &lt;- ggPie(crop = &quot;Lentils&quot;, measurement = &quot;Production&quot;, year = 1961, other = 0.02)
ggsave(&quot;lentil_08.png&quot;, mp, width = 6, height = 4)</code></pre>
<p><img src="lentil_08.png" /></p>
<div style="page-break-after: always;"></div>
</div>
</div>
<div id="heatmap" class="section level1">
<h1>Heatmap</h1>
<pre class="r"><code># Prep data
x1 &lt;- agData_FAO_Crops %&gt;% 
  filter(Crop == &quot;Lentils&quot;, Measurement == &quot;Production&quot;, Year == 2018,
         Area %in% agData_FAO_Country_Table$Country) %&gt;%
    top_n(10, Value)
xx &lt;- agData_FAO_Crops %&gt;% 
  filter(Crop == &quot;Lentils&quot;, Measurement == &quot;Production&quot;, 
         Area %in% x1$Area)
mycolors &lt;- c(&quot;lightblue&quot;, &quot;darkgoldenrod4&quot;, &quot;darkred&quot;)
# Plot
mp &lt;- ggplot(xx, aes(x = Year, y = Area, fill = Value)) +
  geom_tile(color = &quot;white&quot;, size = 0.35) +
  scale_x_continuous(expand = c(0,0)) +
  scale_fill_gradientn(colors = mycolors, na.value = &#39;white&#39;) +
  geom_vline(xintercept = 1963, col = &quot;black&quot;) +
  theme_minimal() + 
  theme(panel.grid = element_blank()) +
        coord_cartesian(clip = &#39;off&#39;) +
        ylab(&quot;&quot;) + xlab(&quot;&quot;) +  
        theme(legend.position = &quot;bottom&quot;, text = element_text(size = 8)) +
  labs(caption = &quot;\xa9 www.dblogr.com/  |  Data: FAOSTAT&quot;)
ggsave(&quot;lentil_09.png&quot;, mp, width = 6, height = 4)</code></pre>
<p><img src="lentil_09.png" /></p>
<div style="page-break-after: always;"></div>
<pre class="r"><code># Prep data
x1 &lt;- agData_FAO_Crops %&gt;% 
  filter(Crop == &quot;Lentils&quot;, Measurement == &quot;Area harvested&quot;, Year == max(Year),
         Area %in% agData_FAO_Country_Table$Country) %&gt;%
    top_n(10, Value)
xx &lt;- agData_FAO_Crops %&gt;% 
  filter(Crop == &quot;Lentils&quot;, Measurement == &quot;Yield&quot;,
         Year &gt; max(Year)-5, Area %in% x1$Area) %&gt;% 
  group_by(Area) %&gt;%
  summarise(Value = mean(Value)) %&gt;% 
  addRegionInfo() %&gt;%
  arrange(desc(Value)) %&gt;%
  mutate(Area = factor(Area, levels = Area))
# Plot
mp &lt;- ggplot(xx, aes(x = Area, y = Value, fill = SubRegion)) + 
  geom_bar(stat = &quot;identity&quot;, color = &quot;black&quot;) + 
  scale_fill_manual(values = agData_Colors[c(1,4,3,5,2,6)]) +
  theme_agData(legend.position = &quot;bottom&quot;) +
  labs(title = &quot;Lentil Yields - 5 year average&quot;,
       y = &quot;tonnes / hectare&quot;, x = NULL,
       caption = &quot;\xa9 www.dblogr.com/  |  Data: FAOSTAT&quot;)
ggsave(&quot;lentil_10.png&quot;, mp, width = 6, height = 4)</code></pre>
<p><img src="lentil_10.png" /></p>
</div>
<div id="country-pdf" class="section level1">
<h1>Country PDF</h1>
<pre class="r"><code># Prep data
xx &lt;- agData_FAO_Crops %&gt;% 
  filter(Crop == &quot;Lentils&quot;, Area %in% agData_FAO_Country_Table$Country) %&gt;%
  mutate(Value = ifelse(Measurement %in% c(&quot;Area harvested&quot;,&quot;Production&quot;),
                        Value / 1000000, Value),
         Unit = plyr::mapvalues(Unit, c(&quot;hectares&quot;,&quot;tonnes&quot;), 
                        c(&quot;Million hectares&quot;,&quot;Million tonnes&quot;)))
# Plot
pdf(&quot;lentil_fao.pdf&quot;, width = 12, height = 4)
for(i in unique(xx$Area)) {
  print(ggplot(xx %&gt;% filter(Area == i)) +
    geom_line(aes(x = Year, y = Value, color = Measurement)) +
    facet_wrap(. ~ Measurement + Unit, ncol = 3, scales = &quot;free_y&quot;) +
    theme_agData(legend.position = &quot;none&quot;, rotx = T) +
    scale_color_manual(values = agData_Colors) +
    scale_x_continuous(breaks = seq(1960, 2015, by = 5) ) +
    labs(title = i, y = NULL, x = NULL,
         caption = &quot;\xa9 www.dblogr.com/  |  Data: FAOSTAT&quot;) )
}
dev.off()</code></pre>
<p><img src="lentil_fao_pdf.png" /></p>
<p><a href="lentil_fao.pdf"><strong>PDF</strong>: Lentil production by country.</a></p>
</div>
