---
title: "Calendar Creation"
subtitle: "Create a custom calendar in R"
summary:  "Create a custom calendar in R"
author: "Derek Michael Wright <wrightmderek@gmail.com> [www.dblogr.com/](https://dblogr.netlify.com/)"
date: "2020-03-01"
categories: [ "dblogr" ]
tags: [ "dblogr", "R" ]
image:
  preview_only: true
links: 
  - icon: file-code
    icon_pack: far
    name: HTML
    url: https://derekmichaelwright.github.io/htmls/dblogr/calendar_creation.html
  - icon_pack: far
    icon: file-pdf
    name: PDF (Save/Print)
    url: dblogr_pdfs/calendar_creation.pdf
  - icon_pack: fa
    icon: calendar
    name: Calendar (Year)
    url: Calendar_Year.pdf
  - icon_pack: fa
    icon: calendar
    name: Calendar (Monthly)
    url: Calendar_Monthly.pdf
  - icon_pack: fa
    icon: calendar
    name: Calendar (Weekly)
    url: Calendar_Weekly.pdf
---



<hr />
<pre class="r"><code># Load libraries
library(tidyverse); library(lubridate); library(magick); library(fs)
library(extrafont); library(patchwork); library(sugrrants) </code></pre>
<pre class="r"><code># Prep data
year &lt;- 2020
min_date &lt;- make_date(year)
days &lt;- if_else(leap_year(min_date), 365, 364)
week &lt;- c(&quot;Monday&quot;,&quot;Tuesday&quot;,&quot;Wednesday&quot;,&quot;Thursday&quot;,&quot;Friday&quot;,&quot;Saturday&quot;,&quot;Sunday&quot;)
year_cal &lt;- data.frame(date = min_date + 0:days, x = 0, y = 0) %&gt;%
  mutate(month = format(date, &quot;%B&quot;),
         weekday = factor(format(date, &quot;%A&quot;), levels = week),
         day = format(date, &quot;%e&quot;), week = NA,
         weekend = as.factor(if_else(weekday %in% c(&quot;Saturday&quot;,&quot;Sunday&quot;), 1, 0)),
         text = NA )
year_cal$weekday &lt;- factor(year_cal$weekday,                  )
week &lt;- 1
for(i in 1:nrow(year_cal)) {
  year_cal[i, &quot;week&quot;] &lt;- week
  if(year_cal$weekday[i] == &quot;Sunday&quot; &amp; i != 1) { week &lt;- week + 1 }
}
# add text
year_cal$text[year_cal$date == &quot;2020-01-01&quot;] &lt;- &quot;This is the first day of the\nyear 2020&quot;
year_cal$text[year_cal$date == &quot;2020-07-01&quot;] &lt;- &quot;Canada Day&quot;
year_cal$text[year_cal$date == &quot;2020-08-10&quot;] &lt;- &quot;My Birthday&quot;
year_cal$text[year_cal$date == &quot;2020-12-25&quot;] &lt;- &quot;Christmas&quot;</code></pre>
<div style="page-break-after: always;"></div>
<div id="create-year-calendar" class="section level1">
<h1>Create Year Calendar</h1>
<pre class="r"><code>cal&lt;-list()
for (i in 1:12) {
  start_date &lt;- make_date(year, i)
  end_date &lt;- start_date + months(1)
  tbl_cal &lt;- year_cal %&gt;% filter(date &gt;= start_date, date &lt; end_date)
  cal[[i]] &lt;- ggplot(tbl_cal, aes(x = x, y = y)) +
    geom_text(aes(label = day), hjust = 0.5, size = 4, 
              alpha = 0.2, fontface = &quot;bold.italic&quot;) +
    geom_rect(aes(fill = weekend), alpha = 0.1, 
              xmin = -1, xmax = 1, ymin = -1, ymax = 1) +
    facet_calendar(~ date, format = &quot;%e&quot;, week_start = 7) +
    labs(x = &quot;&quot;, y = &quot;&quot;, title = tbl_cal$month[1]) +
    scale_fill_manual(values = c(alpha(&quot;darkgoldenrod&quot;,0.5), alpha(&quot;darkgreen&quot;,0.5))) +
    theme_bw() +
    theme(plot.title = element_text(hjust = 0.5),
          legend.position = &quot;none&quot;,
          axis.ticks = element_blank(),
          axis.text = element_blank(),
          panel.grid.major = element_blank(),
          panel.grid.minor = element_blank(),
          strip.background = element_blank(),
          strip.text = element_blank() 
          )
}
mp &lt;- ggpubr::ggarrange(plotlist = cal, nrow = 3, ncol = 4) +
  annotate(&quot;text&quot;, label = year)
#
pdf(file = &quot;Calendar_Year.pdf&quot;, width = 10.5, height = 8)
mp
dev.off() #dev.set(dev.next())</code></pre>
<p><img src="featured.png" /></p>
<p><a href="https://github.com/derekmichaelwright/myblog/tree/master/content/dblogr/calendar_creation/Calendar_Year.pdf"><em>PDF: Yearly Calendar.</em></a></p>
<div style="page-break-after: always;"></div>
</div>
<div id="create-monthly-calendar" class="section level1">
<h1>Create Monthly Calendar</h1>
<pre class="r"><code>pdf(file = &quot;Calendar_Monthly.pdf&quot;, width = 10.5, height = 8)
par(mar = c(1,1,1,1))
for (i in 1:12) {
  im &lt;- image_read(paste0(&quot;images/&quot;,list.files(&quot;images/&quot;)[i]))
  im &lt;- grid::rasterGrob(im, interpolate = TRUE)
  month_image &lt;- ggplot() + geom_blank() + theme_void() +
    annotation_custom(im)
  start_date &lt;- make_date(year, i)
  end_date &lt;- start_date + months(1)
  tbl_cal &lt;- year_cal %&gt;% filter(date &gt;= start_date, date &lt; end_date)
  cal &lt;- ggplot(tbl_cal, aes(x = x, y = y)) +
    geom_rect(aes(fill = weekend), alpha = 0.1,
              xmin = -1, xmax = 1, ymin = -1, ymax = 1) +
    # For adding daily text
    geom_text(aes(label = text), x = -0.045, y = 0.045, 
              size = 2, alpha = 0.8, vjust = 1, hjust = 0,
              fontface = &quot;bold.italic&quot;, data = tbl_cal %&gt;% filter(!is.na(text))) +
    # Use this for day labels instead of facets
    #geom_text(aes(label = day),
    #  data = tbl_cal %&gt;% filter(!is.na(text)),
    #  size = 4, alpha = 0.2, fontface = &quot;bold.italic&quot;) +
    facet_calendar(~ date, format = &quot;%e&quot;, week_start = 7) +
    labs(x = &quot;&quot;, y = &quot;&quot;, title = paste(year,&quot;-&quot;,tbl_cal$month[1])) +
    scale_fill_manual(values = c(alpha(&quot;darkgoldenrod&quot;,0.5), alpha(&quot;darkgreen&quot;,0.5))) +
    theme_bw() +
    theme(legend.position = &quot;none&quot;,
          axis.ticks = element_blank(),
          axis.text = element_blank(),
          panel.grid.major = element_blank(),
          panel.grid.minor = element_blank(),
          strip.background = element_rect(fill = NA),
          strip.text = element_text(hjust = 0) )
  cal
  print(month_image)
  print(cal)
}
dev.off()</code></pre>
<p><img src="img_calendar_month.png" /></p>
<p><a href="https://github.com/derekmichaelwright/myblog/tree/master/content/dblogr/calendar_creation/Calendar_Monthly.pdf"><em>PDF: Monthly Calendar.</em></a></p>
<div style="page-break-after: always;"></div>
</div>
<div id="create-weekly-calendar" class="section level1">
<h1>Create Weekly Calendar</h1>
<pre class="r"><code>pdf(file = &quot;Calendar_Weekly.pdf&quot;, width = 8, height = 10.5)
par(mar = c(1,1,1,1))
for (i in 1:max(year_cal$week)) {
  tbl_cal &lt;- year_cal %&gt;% filter(week == i)
  cal &lt;- ggplot(tbl_cal, aes(x = x, y = y)) +
    geom_rect(aes(fill = weekend), alpha = 0.1,
              xmin = -1, xmax = 1, ymin = -1, ymax = 1) +
    facet_grid(weekday + date ~ ., switch = &quot;y&quot;) +
    # For adding daily text
    geom_text(aes(label = text), size = 4, alpha = 0.8,
      data = tbl_cal %&gt;% filter(is.na(text))) +
    #
    labs(x = &quot;&quot;, y = &quot;&quot;, 
         title = paste(year, &quot;-&quot;, tbl_cal$month[1], &quot;- week -&quot;, tbl_cal$week[1])) +
    scale_fill_manual(values = c(alpha(&quot;darkgoldenrod&quot;,0.5), alpha(&quot;darkgreen&quot;,0.5))) +
    theme_bw() +
    theme(legend.position = &quot;none&quot;,
          axis.ticks = element_blank(),
          axis.text = element_blank(),
          panel.grid.major = element_blank(),
          panel.grid.minor = element_blank(),
          strip.background = element_rect(fill = NA) )
  print(cal)
}
dev.off()</code></pre>
<p><img src="img_calendar_week.png" /></p>
<p><a href="https://github.com/derekmichaelwright/myblog/tree/master/content/dblogr/calendar_creation/Calendar_Weekly.pdf"><em>PDF: Weekly Calendar.</em></a></p>
</div>
